{"version":3,"sources":["services/persons.js","components/Filter.js","components/People.js","components/PersonForm.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","delete","put","Filter","handler","value","onChange","People","people","onClick","map","person","key","name","number","PersonForm","onSubmit","nameHandler","nameValue","numberHandler","numberValue","type","Notification","message","className","Error","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","array","personService","then","response","concat","data","updatePerson","find","p","result","window","confirm","newPerson","setTimeout","catch","error","length","filter","toLowerCase","includes","event","console","log","target","preventDefault","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9b559ba8.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  remove: remove,\n  update: update\n}","import React from 'react'\n\nconst Filter = ({handler, value}) => {\n    return (\n        <div>\n        filter shown with\n        <input\n            onChange={handler}\n            value={value}\n        />\n        </div>\n    )\n}\nexport default Filter","import React from 'react'\n\nconst People = ({people, onClick}) => {\n    return (\n      <div>\n        <ul>\n          {people.map(person =>\n            <ul key={person.name}>\n              {person.name} {person.number}\n              <button onClick={() => onClick(person.id)}>delete</button>\n            </ul>\n          )}\n        </ul>\n      </div>\n    )\n}\n\nexport default People","import React from 'react'\n\nconst PersonForm = ({onSubmit, nameHandler, nameValue, numberHandler, numberValue}) => {\n    return (\n      <div>\n        <form onSubmit={onSubmit}>\n          name:\n          <input\n            onChange={nameHandler}\n            value={nameValue}\n          /> \n          <br></br> \n          number:\n          <input\n            onChange={numberHandler}\n            value={numberValue}\n          /> \n          <br></br> \n          <button type=\"submit\">add</button>\n        </form>\n      </div>\n    )\n}\n\nexport default PersonForm","import React from 'react'\nconst Notification = ({ message }) => {\n    if (message === '') {\n      return null\n    }\n  \n    return (\n      <div className=\"notification\">\n        {message}\n      </div>\n    )\n}\nexport default Notification","import React from 'react'\nconst Error = ({ message }) => {\n    if (message === '') {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n}\nexport default Error","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport People from './components/People'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\nimport './index.css'\n\nconst App = () => {\n    const [ persons, setPersons] = useState([]) \n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber ] = useState('')\n    const [ search, setSearch ] = useState('')\n    const [ notificationMessage, setNotificationMessage ] = useState('')\n    const [ errorMessage, setErrorMessage ] = useState('')\n  \n    useEffect(() => {\n      const array = []\n      personService\n        .getAll()   \n        .then(response => {\n          setPersons(array.concat(response.data))\n        })\n    }, [])\n  \n    const handleNameChange = (event) => {\n      console.log(event.target.value)\n      setNewName(event.target.value)\n    }\n  \n    const handleNumberChange = (event) => {\n      console.log(event.target.value)\n      setNewNumber(event.target.value)\n    }\n  \n    const handleSearch = (event) => {\n      console.log(event.target.value)\n      setSearch(event.target.value)\n    }\n  \n    const addPerson = (event) => {\n      event.preventDefault()\n      const newObject = {\n        name : newName,\n        number : newNumber\n      }\n      const p = persons.concat(newObject)\n      if (persons.filter(person => person.name === newObject.name).length === 0) {\n        personService\n          .create(newObject)\n          .then(response => {\n            console.log(response)\n          })\n          .then(\n            setPersons(p)\n          )\n          .then(\n            setNotificationMessage(`${newObject.name} is successfully added to phonebook`)\n          )\n          .then(\n            setTimeout(() => {\n              setNotificationMessage('')\n            }, 5000)\n          )\n      }\n      else {\n        const person = persons.filter(p => p.name === newObject.name)[0]\n        //console.log('henkilö on olemassa: ', person)\n        //console.log('henkilön id on ', person.id)\n        updatePerson(person.id)\n      }\n      setNewName('')\n      setNewNumber('')\n      setSearch('')\n    }\n\n    const removePerson = id => {\n      //console.log('poistetaan henkilö, jonka id on', id)\n      const person = persons.find(p => p.id === id)\n      //console.log('tämä henkilö on ', person)\n      const result = window.confirm(`Delete ${person.name}?`)\n      if (result) {\n        personService\n          .remove(id)\n        const array = persons.filter(person => person.id !== id)\n        setPersons(array)\n        setNotificationMessage(`${person.name} is successfully removed from phonebook`)\n        setTimeout(() => {\n          setNotificationMessage('')\n        }, 5000)\n      }\n      \n    }\n\n    const updatePerson = id => {\n      //console.log('yritetään päivittää henkilöä, jonka id on', id)\n      const person = persons.find(p => p.id === id)\n      //console.log('tämä henkilö on ', person)\n      const result = window.confirm(`${person.name} is already in the phonebook. Replace ${person.name}?`)\n      const newPerson = {...person, number: newNumber}\n      //console.log('päivitetty henkilö: ', newPerson)\n      if (result) {\n        personService\n          .update(id, newPerson)\n          .then(\n            setPersons(persons.map(person => person.id !== id ? person : newPerson))\n          )\n          .then(\n            setNotificationMessage(`${person.name}'s number is successfully updated`)\n          )\n          .then(\n            setTimeout(() => {\n              setNotificationMessage('')\n            }, 5000)\n          )\n          .catch(error => {\n            setNotificationMessage('')\n            setErrorMessage(\n              `Person '${person.name}' was already removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage('')\n            }, 5000)\n          })\n      }\n    }\n  \n    const people = search.length === 0\n      ? persons\n      : persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()))\n  \n    return (\n      <div>\n        <h2>Phonebook</h2>\n        <Notification message={notificationMessage} />\n        <Error message={errorMessage} />\n        <Filter handler={handleSearch} value={search} />\n        <h2>add a new</h2>\n        <PersonForm onSubmit={addPerson} nameHandler={handleNameChange} nameValue={newName} numberHandler={handleNumberChange} numberValue={newNumber} />\n        <h2>Numbers</h2>\n        <People people={people} onClick={removePerson} />\n      </div>\n    )\n}\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}